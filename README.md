# ElixirAwesome

## Задание 

У языка Elixir, как и у многих других 1 , существует свой «awesome list»: h4cc/awesome-
elixir. Однако, библиотеки, будучи добавленными в него, устаревают, перестают
поддерживаться или, не набрав заметной популярности, начинают уступать своим
аналогам.
Для наглядного отображения состояния библиотек в awesome list для Elixir вам
предлагается реализовать web-приложение, удовлетворяющее следующим
требованиям:

* Приложение написано на языке Elixir с использованием фреймворка Phoenix.
* Приложение состоит из единственной заглавной страницы: /.
* На этой странице отображена информация о библиотеках Elixir, полученная из 
репозитария awesome list-а https://github.com/h4cc/awesome-elixir.
* Эта информация обновляется ежедневно.   

К описанию каждой библиотеки добавлена следующая информация:
* число ее звезд на Github;
* число дней, прошедших со времени последнего коммита в её репозиторий на
Github.

Страница принимает параметр min_stars: /?min_stars=50.
При указании этого параметра на странице выводятся только те библиотеки, у которых
не менее min_stars звезд.
Если в каком-то разделе не оказалось библиотек после фильтрации по min_stars, то
весь раздел не отображается.
Код должен быть покрыт тестами.
Инструкции по запуску должны находиться в README.
Пример функциональности того, что должно получиться: http://awesome-elixir.ru/

## Подготовка проекта к работе

**Подготовка Backend**

1. mix deps.get
2. mix do ecto.create ecto.migrate
3. Поместить `dev.custom.exs` в папку конфигурации (Смотри пункт "Обход ограничения на колчество запросов")

**Подготовка Frontend**

* cd assets
* npm i

**(!)** Обход ограничения на колчество запросов

В этой задаче есть один подводным камень: нужно сделать порядка 2400 запросов к API GitHub.
Есть ограничение на количество запросов с одного IP адреса https://developer.github.com/v3/#rate-limiting
Если пользователь не авторизованный, то 60 запросов, если авторизованный - 5000.
Поэтому необходимо добавить свои авторизационные данные в папку конфигураций в файл: `dev.custom.exs` в виде:

```elixir
use Mix.Config

config :elixir_awesome, :github_credentials,
  username: "<username>",
  password: "<password>"
```

Используется базовая авторизация.

## Использование проекта

После подгтовки
1. Из корня проекта запустить сервер `mix phx.server`
2. Зайти на главную страницу проекта `http://localhost:4000/`
3. Нажать кнопку `Start refreshing` http://joxi.ru/a2Xnwngiw95Ypr Отмечена цифрой `1` 
4. Наблюдать как количество обновлённых бибилотек увеличивается http://joxi.ru/KAgBwBDTE0bvn2
5. Есть возможность фильтровать по минимальному количеству звёзд http://joxi.ru/D2PdwdkTqEzKl2 можно кнопками а можно просто передавать в качестве URL параметра
6. Данные по библиотекам обновляются Concurrency воркерами. Общее количество запросов ~2400 всё это выполняется приблизительно за 3 минуты 

P.S. Да, есть проблемы с вёрсткой. Я их разрешу. В планах сделать страницу в LiveView. Прогресс будет отображаться без перезагрузки страницы.   

## План действий (50%):

* + Сверстать страницу с моком данных и фильтрацией по звёздам
* + Реализовать автоматический запрос по крону обновления данных
* - Написать тесты на всё
* - (Опционально) Реализовать страницу с LiveView, возможностью динамически подгрузать данные по репозиториям.

## Детали

* Загрузка данных по библиотекам осуществляется асинхронно
* Интервал загрузки задаётся в настройках приложения
* Загрузка осуществляется по CRON
* Для осуществления HTTP запросов используется HTTPoison
* Получение данных из GitHub осуществляется с помощью REST API https://developer.github.com/v3/
* Для стилей используется Bootstrap


##Измерения

Данные о библиотеках запрашиваются конкурирующими воркерами. Это было сделано намерено, чтобы уменшить время скачивания.

Количество библиотек: ~1340
Время скачивания 1 воркером: ~ 24 минут
Время скачивания 10 воркерами: ~ 3 минут

Очевидно что конкурирующие воркеры осуществляют операцию существенно быстрее. 
